!function($,t,o,e){"use strict";function s(t){$(o).trigger("initialized.OctoModal"),this.run(t)}var a={action:"open",gallerySelector:"",galleryPosition:0,effect:"fade-in-scale",showCloseButton:!0,closeOnOverlay:!0,removeTimeOut:400,width:"auto",classes:[],content:"",templates:{main:'<div class="octomodal octomodal--open ${classes}"><div class="octomodal__wrapper"><div class="octomodal__container" ${styles}><div class="octomodal__content">${content}</div>${galleryControls}${closeButton}</div></div></div>',closeButton:'<div class="octomodal__close-button"></div>',gallery:{image:'<img src="${image}" class="octomodal__gallery-image js-octomodal__gallery-right" alt="">',controls:'<div class="octomodal__controls"><div class="octomodal__controls-item octomodal__controls-item--left js-octomodal__gallery-left"></div><div class="octomodal__controls-item octomodal__controls-item--right js-octomodal__gallery-right"></div></div>'}}},i={status:"close",closeSelectors:[],gallery:!1,galleryList:[],galleryPosition:0};s.prototype.run=function(t){this.setOptions(t),this.setData(),this.setCloseSelectors(),this.setActions(),this.data.gallery?(this.getGalleryList(),this.setGalleryEvents()):this.doAction()},s.prototype.setOptions=function(t){this.options=$.extend({},a,t)},s.prototype.setData=function(){this.data=i,this.data.gallery=this.options.gallerySelector.length>0},s.prototype.setCloseSelectors=function(){this.options.showCloseButton&&this.data.closeSelectors.push(".octomodal__close-button"),this.options.closeOnOverlay&&this.data.closeSelectors.push(".octomodal__wrapper")},s.prototype.setActions=function(){var e=this;this.actions={open:function(){if("close"===e.data.status){var t=e.getTemplate(e.options.content);$(o.body).append(t),e.setPosition(),e.preventBodyScrolling(!0),e.data.status="open",e.addEvents(),$(o).trigger("opened.OctoModal")}else e.options.action="setContent",e.doAction()},setContent:function(){"open"===e.data.status?($(".octomodal").find(".octomodal__content").html(e.options.content),e.setPosition(),$(o).trigger("contentChanged.OctoModal")):(e.options.action="open",e.doAction())},close:function(){"open"===e.data.status&&($(".octomodal").removeClass("octomodal--open").addClass("octomodal--close"),t.setTimeout(function(){$(".octomodal").remove()},e.options.removeTimeOut),e.preventBodyScrolling(!1),e.data.status="close",e.removeEvents(),$(o).trigger("closed.OctoModal"))}}},s.prototype.doAction=function(){this.actions[this.options.action]!==e&&this.actions[this.options.action]()},s.prototype.getTemplate=function(t){var o=this.options.templates.main,e="",s="",a=[],i=[];return this.options.showCloseButton&&(e=this.options.templates.closeButton),this.data.gallery&&(a.push("octomodal--gallery"),s=this.options.templates.gallery.controls),this.options.effect.length>0&&a.push("octomodal--"+this.options.effect),this.options.classes&&this.options.classes.length>0&&a.push(this.options.classes),"auto"!==this.options.width&&this.options.width.length>0&&i.push("width: "+this.options.width),o=o.replace(/\$\{closeButton}/,e),o=o.replace(/\$\{galleryControls}/,s),o=o.replace(/\$\{classes}/,a.join(" ")),o=o.replace(/\$\{styles}/,'style="'+i.join("; ")+'"'),o=o.replace(/\$\{content}/,t)},s.prototype.getPosition=function(o){var e=o||$(".octomodal").find(".octomodal__container"),s=e.outerHeight(),a=$(t).height(),i={marginTop:30,marginBottom:30};return a>s+i.marginTop+i.marginBottom&&(i.marginTop=Math.floor((a-s)/2),i.marginBottom=0),i},s.prototype.setPosition=function(){var t=$(".octomodal").find(".octomodal__container");t.css(this.getPosition(t)),$(o).trigger("positionChanged.OctoModal")},s.prototype.preventBodyScrolling=function(t){t&&$(o.body).addClass("octomodal-fix"),t||$(o.body).removeClass("octomodal-fix")},s.prototype.addEvents=function(){var e=this,s=!1;this.data.closeSelectors.length>0&&$(o.body).on("click.OctoModal",".octomodal",function(t){e.data.closeSelectors.forEach(function(o,a,i){$(t.target).is(o)&&!s&&(e.actions.close(),s=!0)})}),this.data.gallery&&($(o.body).on("click.OctoModal",".js-octomodal__gallery-left",function(t){0===e.data.galleryPosition?e.data.galleryPosition=e.data.galleryList.length-1:e.data.galleryPosition-=1,e.changeGalleryContent(e.data.galleryPosition)}),$(o.body).on("click.OctoModal",".js-octomodal__gallery-right",function(t){e.data.galleryPosition===e.data.galleryList.length-1?e.data.galleryPosition=0:e.data.galleryPosition+=1,e.changeGalleryContent(e.data.galleryPosition)})),$(t).on("resize.OctoModal",function(t){e.setPosition()})},s.prototype.removeEvents=function(){$(o.body).off(".OctoModal")},s.prototype.getGalleryList=function(){var t=this;$(this.options.gallerySelector).each(function(o,e){t.data.galleryList.push($(this).attr("href"))})},s.prototype.setGalleryEvents=function(){this.data.galleryPosition=this.options.galleryPosition,this.showGallery()},s.prototype.loadImage=function(){var t=this;$(".octomodal__gallery-image").on("load",function(o){t.setPosition()})},s.prototype.showGallery=function(){this.options.content=this.getGalleryTemplate(this.data.galleryList[this.data.galleryPosition]),this.actions.open(),this.loadImage()},s.prototype.getGalleryTemplate=function(t){var o=this.options.templates.gallery.image;return o=o.replace(/\$\{image}/,t)},s.prototype.changeGalleryContent=function(t){this.options.content=this.getGalleryTemplate(this.data.galleryList[t]),this.actions.setContent(),this.loadImage()},$.octoModal=function(t){var a=$(o.body).data("OctoModal");return a||"object"!=typeof t&&t!==e?!a||"object"!=typeof t&&t!==e?void 0:a.run(t):$(o.body).data("OctoModal",new s(t))}}(jQuery,window,document);