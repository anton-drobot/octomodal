/** jQuery OctoModal 1.0.1-beta6 / Copyright 2015 Anton Drobot me@antondrobot.ru / https://github.com/anton-drobot/octomodal / Licensed under MIT */
!function($,t,o,i){"use strict";function s(t){this.options=$.extend({},e,t),this.data={status:"close",closeSelectors:[],gallery:this.options.galleryList.length>0,galleryPosition:0},this.init(),$(o).trigger("initialized.OctoModal"),this.doAction()}var e={action:"open",galleryList:[],effect:"fade-in-scale",showCloseButton:!0,closeOnOverlay:!0,removeTimeOut:400,width:"auto",widthBreakPoints:{small:"400px",medium:"720px",large:"960px",xLarge:"1140px"},classes:"",content:"",templates:{main:'<div class="octomodal octomodal--open ${effect}${classes}"><div class="octomodal__wrapper"><div class="octomodal__container"${width}><div class="octomodal__content">${content}</div>${galleryControls}${closeButton}</div></div></div>',closeButton:'<div class="octomodal__close-button"></div>',galleryImage:'<img src="${image}" class="octomodal__gallery-image" alt="">',galleryControls:'<div class="octomodal__controls"><div class="octomodal__controls-item octomodal__controls-item--left"></div><div class="octomodal__controls-item octomodal__controls-item--right"></div></div>'}};s.prototype.init=function(){this.options.showCloseButton&&this.data.closeSelectors.push(".octomodal__close-button"),this.options.closeOnOverlay&&this.data.closeSelectors.push(".octomodal__wrapper")},s.prototype.setOptions=function(t){typeof t.action===i&&(t.action="setOptions"),this.options=$.extend({},this.options,t),this.init(),this.doAction()},s.prototype.doAction=function(){"open"===this.options.action&&this.openAction(),"setContent"===this.options.action&&this.setContentAction(),"close"===this.options.action&&this.closeAction()},s.prototype.openAction=function(){if("close"===this.data.status){this.data.gallery&&(this.options.content=this.getImageTemplate(this.options.galleryList[0]));var t=this.getTemplate(this.options.content);$(o.body).append(t),this.setPosition(),this.preventBodyScrolling(!0),this.data.status="open",this.addEvents(),$(o).trigger("opened.OctoModal")}else this.options.action="setContent",this.doAction()},s.prototype.setContentAction=function(){"open"===this.data.status?($(".octomodal").find(".octomodal__content").html(this.options.content),this.setPosition(),$(o).trigger("contentChanged.OctoModal")):(this.options.action="open",this.doAction())},s.prototype.closeAction=function(){"open"===this.data.status&&($(".octomodal").removeClass("octomodal--open").addClass("octomodal--close"),t.setTimeout(function(){$(".octomodal").remove()},this.options.removeTimeOut),this.preventBodyScrolling(!1),this.data.status="close",this.setToDefaults(),this.removeEvents(),$(o).trigger("closed.OctoModal"))},s.prototype.setPosition=function(){var i=this;this.data.gallery&&$(".octomodal__gallery-image").on("load",function(t){i.setPosition()});var s=$(".octomodal").find(".octomodal__container"),e=s.outerHeight(),n=$(t).height(),a=$(o).scrollTop(),l={marginTop:30,marginBottom:30};n>e+l.marginTop+l.marginBottom&&(l.marginTop=Math.floor((n-e)/2),l.marginBottom=0),l.marginTop+=a,s.css(l),$(o).trigger("positionChanged.OctoModal")},s.prototype.setGalleryPosition=function(t){this.options.content=this.getImageTemplate(this.options.galleryList[t]),this.setContentAction()},s.prototype.getTemplate=function(t){var o=this.options.templates.main,s="",e="",n="",a="",l="";return this.options.showCloseButton&&(s=this.options.templates.closeButton),this.data.gallery&&(e=this.options.templates.galleryControls),this.options.effect&&this.options.effect.length>0&&(n=" octomodal--"+this.options.effect),this.options.classes&&this.options.classes.length>0&&(a=" "+this.options.classes),"auto"!==this.options.width&&this.options.width.length>0&&(l=this.options.widthBreakPoints[this.options.width]!==i?' style="width: '+this.options.widthBreakPoints[this.options.width]+';"':' style="width: '+this.options.width+';"'),o=o.replace(/\$\{effect}/,n),o=o.replace(/\$\{closeButton}/,s),o=o.replace(/\$\{galleryControls}/,e),o=o.replace(/\$\{classes}/,a),o=o.replace(/\$\{width}/,l),o.replace(/\$\{content}/,t)},s.prototype.getImageTemplate=function(t){var o=this.options.templates.galleryImage;return o.replace(/\$\{image}/,t)},s.prototype.addEvents=function(){var i=this,s=!1;this.data.closeSelectors.length>0&&$(o.body).on("click.OctoModal",".octomodal",function(t){i.data.closeSelectors.forEach(function(o,e,n){$(t.target).is(o)&&!s&&(i.closeAction(),s=!0)})}),this.data.gallery&&($(o.body).on("click.OctoModal",".octomodal__controls-item--left",function(t){0===i.data.galleryPosition?i.data.galleryPosition=i.options.galleryList.length-1:i.data.galleryPosition-=1,i.setGalleryPosition(i.data.galleryPosition)}),$(o.body).on("click.OctoModal",".octomodal__controls-item--right",function(t){i.data.galleryPosition===i.options.galleryList.length-1?i.data.galleryPosition=0:i.data.galleryPosition+=1,i.setGalleryPosition(i.data.galleryPosition)})),$(t).on("resize.OctoModal",function(t){i.setPosition()})},s.prototype.removeEvents=function(){$(o.body).off(".OctoModal")},s.prototype.setToDefaults=function(){this.options=e},s.prototype.preventBodyScrolling=function(t){t&&$(o.body).addClass("octomodal-fix"),t||$(o.body).removeClass("octomodal-fix")},$.octoModal=function(t){var e=$(o.body).data("OctoModal");return e||"object"!=typeof t&&t!==i?!e||"object"!=typeof t&&t!==i?void 0:e.setOptions(t):$(o.body).data("OctoModal",new s(t))}}(jQuery,window,document);